{"version":3,"sources":["components/footer/footer.module.css","components/header/header.module.css","components/rate/rate.module.css","components/reviews/review/review.module.css","components/restaurants/restaurant/restaurant.module.css","components/navigation/navigation.module.css","components/product/product.module.css","components/basket/basketItem/basketItem.module.css","components/currency-switcher/currency-switcher.module.css","components/description/description.module.css","components/hero/hero.module.css","components/loader/loader.module.css","components/error-page/error-page.module.css","components/menu/menu.module.css","components/reviews/review-form/review-form.module.css","components/validation-pop-up/validation-pop-up.module.css","components/reviews/reviews.module.css","components/restaurants/restaurants.module.css","components/basket/basket.module.css","components/card/card.module.css","components/order-status/order-status.module.css","components/contacts/contacts.module.css","components/faq/faq.module.css","components/about/about.module.css","components/description/description.jsx","components/footer/footer.jsx","context/money-context.jsx","components/currency-switcher/currency-switcher.jsx","redux/constants/constants.js","redux/requests/requests.js","redux/features/users.js","redux/features/reviews.js","redux/selectors.js","redux/features/order.js","components/header/header.jsx","components/hero/hero.jsx","components/navigation/navigation.jsx","components/navigation/index.js","components/loader/loader.jsx","components/loader/index.js","components/error-page/error-page.jsx","redux/features/currentRestaurant.js","components/product/product.jsx","components/menu/index.js","components/menu/menu.jsx","components/rate/index.js","components/rate/rate.jsx","components/reviews/review/review.jsx","components/validation-pop-up/validation-pop-up.jsx","components/reviews/review-form/review-form.jsx","components/reviews/reviews.jsx","components/restaurants/restaurant/restaurant.jsx","components/restaurants/restaurant/index.js","redux/actions/action.js","components/restaurants/restaurants.jsx","components/restaurants/index.js","components/basket/basketItem/basketItem.jsx","components/basket/basketItem/index.js","components/basket/basket.jsx","components/basket/index.js","components/card/card.jsx","components/order-status/order-status.jsx","components/contacts/contacts.jsx","components/faq/faq.jsx","components/about/about.jsx","components/app.jsx","redux/reducer/restaurants.js","redux/reducer/products.js","history.js","redux/reducer/index.js","redux/middleware/uuid.js","redux/middleware/api.js","redux/store.js","index.js"],"names":["module","exports","Description","className","style","description","Footer","footer","up","href","icon","faArrowUp","desContainer","logo","src","process","alt","to","activeClassName","active","social","faTwitterSquare","faFacebookSquare","faInstagramSquare","faVk","down","Date","getFullYear","MoneyContext","createContext","currencyArr","name","rate","MoneyProvider","children","useState","currentCurrency","setCurrentСurrency","Provider","value","recalculatePrice","price","filter","currency","map","toFixed","CurrencySwitcher","useContext","currencySwitcher","onClick","FETCH_RESTAURANTS","FETCH_CURRENT_REST_PRODUCTS","LOADING","LOADED","ERROR","STATUS","get","url","fetch","then","resp","json","id","order","method","body","post","loadUsers","createAsyncThunk","requests","reducer","createSlice","initialState","entities","error","extraReducers","pending","type","state","fulfilled","action","result","produce","draft","payload","reduce","acc","user","Object","assign","rejected","console","log","review","userId","meta","addReview","createAction","props","restaurantId","generateId","loadReviews","dispatch","catch","push","Reviews","createEntityAdapter","getInitialState","status","reducers","addMany","reviewId","addOne","text","rating","reviewsMap","reviews","reviewByIdWithUserSelector","users","usersMap","userByIdSelector","productMap","products","restaurantsMap","restaurants","restaurantsLoadingSelector","restaurantsLoadedSelector","restaurantReviewsLoadingSelector","restaurantReviewsLoadedSelector","restaurantListSelector","createSelector","values","restaurantByProductId","product","rest","menu","find","restaurantByIdSelector","restaurantReviewsListSelector","key","averageRatingSelector","restaurant","ratings","Math","round","length","productLoadingSelector","productLoadedSelector","productByIdSelector","makeOrder","initState","serverResponse","increment","decrement","remove","actions","clearOrder","orderList","orderResponseStatus","orderedProductsSelector","orderIds","keys","includes","amount","totalOrderPriceSelector","orderProductAmountSelector","connect","totalOrderCost","header","checkout","faShoppingBasket","Hero","hero","Navigation","onRestaurantClick","navContainer","navigation","nav","backgroundImage","image","Loader","loader","ErrorPage","currentRestaurantId","setCurrentRestaurant","currentRestaurantIdSelector","currentRestaurant","currentRestaurantSelector","loading","loaded","ingredients","join","Menu","this","Component","Rate","handleRateChange","undefined","setRate","Array","_","idx","red","white","faStar","reviewWithUser","reviewContainer","author","info","ValidationPopUp","message","cn","validation","INIT_FORM_STATE","handleSubmit","formValues","setFormValues","isFormValid","setIsFormValid","handleInputChange","event","target","checked","validateFormValues","setTimeout","div","reviewForm","onSubmit","preventDefault","htmlFor","placeholder","onChange","reviewsIsLoading","reviewsIsLoaded","useEffect","Restaurant","averageRating","loadCurrentRestaurantProducts","curRestId","a","data","switcher","path","Restaurants","allRestaurants","loadRestaurants","callApi","restId","match","params","component","BasketItem","basketItem","baksetOrder","Basket","isDisabled","setIsDisabled","basket","disabled","card","OrderStatus","Contacts","contacts","FAQ","faq","About","about","rel","App","exact","from","history","createBrowserHistory","router","connectRouter","store","next","ids","uuid","configureStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActionPaths","concat","routerMiddleware","api","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.62c9ccb7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"footer_footer__wSOud\",\"desContainer\":\"footer_desContainer__PV8Lz\",\"logo\":\"footer_logo__XUr2n\",\"description\":\"footer_description__DhP8g\",\"social\":\"footer_social__29vSg\",\"up\":\"footer_up__3k_j5\",\"down\":\"footer_down__1M0Wz\",\"active\":\"footer_active__2QeWo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__1opoS\",\"logo\":\"header_logo__2vu4C\",\"menu\":\"header_menu__3ezdi\",\"checkout\":\"header_checkout__32Z3P\",\"active\":\"header_active__vfqjn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"red\":\"rate_red__3aL5v\",\"white\":\"rate_white__2WN12\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviewContainer\":\"review_reviewContainer__2EdBC\",\"review\":\"review_review__6XLJO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"restaurant\":\"restaurant_restaurant__1MZzE\",\"switcher\":\"restaurant_switcher__37E33\",\"active\":\"restaurant_active__3B09i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navContainer\":\"navigation_navContainer__2U-RJ\",\"navigation\":\"navigation_navigation__2s3-u\",\"nav\":\"navigation_nav__21O9i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"product\":\"product_product__3x2wL\",\"description\":\"product_description__30YlL\",\"order\":\"product_order__5uwn2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basketItem\":\"basketItem_basketItem__1KzGl\",\"baksetOrder\":\"basketItem_baksetOrder__1nbPo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"currencySwitcher\":\"currency-switcher_currencySwitcher__34Mxv\",\"active\":\"currency-switcher_active__mevCE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"description\":\"description_description__2j3sq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hero\":\"hero_hero__1Tf5N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"loader_loader__1l0mq\",\"toggle\":\"loader_toggle__3DAL_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"error-page_error__2GhK4\",\"identifier\":\"error-page_identifier__mpf8f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"menu_menu__1VIWa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviewForm\":\"review-form_reviewForm__3L_U7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"validation\":\"validation-pop-up_validation__1VvXX\",\"appearance\":\"validation-pop-up_appearance__15j8V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviews\":\"reviews_reviews__18FQM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"restaurants\":\"restaurants_restaurants__edo12\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basket\":\"basket_basket__3nmpR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card_card__2yoCQ\",\"identifier\":\"card_identifier__2oi-6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order-status_order__iqf5R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contacts\":\"contacts_contacts__2-npZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"faq\":\"faq_faq__2wfsP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"about\":\"about_about__2En2f\"};","import style from './description.module.css';\r\n\r\nexport default function Description() {\r\n  return (\r\n    <div className={style.description}>\r\n      <ul>\r\n        <li>An Internet aggregator is a site that combines various thematic platforms in order to increase their sales level and ensure the convenience of users' choice of dishes and drinks. A distinctive feature of the site is a unified design, user-friendly interface. Here companies are not advertised, do not compete with each other in a colorful presentation. They are offered as part of a catalog of establishments that operate in your city.</li>\r\n        <li>The operating principle of an internet aggregator is quite simple. On the Internet resource, the user is provided with a wide range of cafes and restaurants for the delivery of ready-made food. Among all the establishments, a person chooses an establishment that is interesting to him, forms an order. The user does not pay a percentage or a flat rate for working with the resource. The prices presented here are similar to the restaurant's menu published on the official website. Meanwhile, a restaurant, cafe, pizzeria or other establishment must give 15-20% of the total order value to the aggregator. In the West, this figure does not even reach 10%. Experts suggest that a high percentage in Russia is associated with a relatively young system of Internet aggregators. As soon as the competition is higher, the percentage will decrease.</li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  faFacebookSquare,\r\n  faInstagramSquare,\r\n  faVk,\r\n  faTwitterSquare,\r\n} from \"@fortawesome/free-brands-svg-icons\";\r\nimport { NavLink } from 'react-router-dom';\r\nimport { faArrowUp } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport style from './footer.module.css';\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <div className={style.footer}>\r\n      <a className={style.up} href=\"#hero\">\r\n        <li>Up<i><FontAwesomeIcon icon={faArrowUp} /></i></li>\r\n      </a>\r\n      <div className={style.desContainer}>\r\n        <div className={style.description}>\r\n          <div className={style.logo}>\r\n            <img src={process.env.PUBLIC_URL + '/logo100_120.png'} alt=\"\" />\r\n            <h3>Consegna del cibo</h3>\r\n          </div>\r\n          <ul>\r\n            <li>\r\n              <NavLink to=\"/restaurants\"\r\n                activeClassName={style.active}\r\n              >\r\n                Home\r\n              </NavLink>\r\n            </li>\r\n            <li>\r\n              <NavLink to=\"/about\"\r\n                activeClassName={style.active}\r\n              >\r\n                About\r\n              </NavLink>\r\n            </li>\r\n            <li>\r\n              <NavLink to=\"/contacts\"\r\n                activeClassName={style.active}\r\n              >\r\n                Contacts\r\n              </NavLink>\r\n            </li>\r\n            <li>\r\n              <NavLink to=\"/faq\"\r\n                activeClassName={style.active}\r\n              >\r\n                FAQ\r\n              </NavLink>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className={style.social}>\r\n          <ul>\r\n            <li><i><FontAwesomeIcon icon={faTwitterSquare} /></i></li>\r\n            <li><i><FontAwesomeIcon icon={faFacebookSquare} /></i></li>\r\n            <li><i><FontAwesomeIcon icon={faInstagramSquare} /></i></li>\r\n            <li><i><FontAwesomeIcon icon={faVk} /></i></li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div className={style.down}>\r\n        © 2000–{new Date().getFullYear()}, ООО «Consegna del cibo», official site\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { createContext, useState } from 'react';\r\n\r\n// Объявили контекст\r\nexport const MoneyContext = createContext();\r\n\r\nexport const currencyArr = [\r\n  { name: 'RUB', rate: 1, },\r\n  { name: 'USD', rate: 1/70, },\r\n  { name: 'EUR', rate: 1/80, },\r\n]\r\n\r\n// Просто функция, с состоянием, которая принимает какие то пропы\r\nexport default function MoneyProvider({ children }) {\r\n  const [currentCurrency, setCurrentСurrency] = useState('RUB');\r\n\r\n  const recalculatePrice = (price) => {\r\n    return currencyArr.filter(currency => currency.name === currentCurrency)\r\n      .map(currency => (price * currency.rate).toFixed(2) + currency.name);\r\n  }\r\n  // Возвращает объект (children) обернутый в провайдер,\r\n  // и передает этому чилдрену состояние функции и методы\r\n  return (\r\n    <MoneyContext.Provider value={{ currentCurrency, setCurrentСurrency, recalculatePrice }}>\r\n      {children}\r\n    </MoneyContext.Provider>\r\n  )\r\n}\r\n","import { useContext } from \"react\";\r\nimport { MoneyContext, currencyArr } from \"../../context/money-context\";\r\n\r\nimport style from './currency-switcher.module.css';\r\n\r\nexport default function CurrencySwitcher() {\r\n  const { currentCurrency, setCurrentСurrency } = useContext(MoneyContext);\r\n\r\n  return (\r\n    <div className={style.currencySwitcher}>\r\n      {currencyArr.map(currency => {\r\n        return <h4\r\n          key={currency.name}\r\n          className={currentCurrency === currency.name ? style.active : ''}\r\n          onClick={() => setCurrentСurrency(currency.name)}\r\n        >{currency.name}</h4>\r\n      })}\r\n    </div>\r\n  )\r\n}","\r\nexport const FETCH_RESTAURANTS = 'fetch_restaurants';\r\nexport const FETCH_CURRENT_REST_PRODUCTS = 'FETCH_CURRENT_REST_PRODUCTS';\r\n\r\nexport const LOADING = 'loading';\r\nexport const LOADED = 'loaded';\r\nexport const ERROR = 'error';\r\n\r\nexport const STATUS = {\r\n  empty: 'empty', //TODO Подумать, как лучше семантически назвать статус\r\n  loading: 'loading',\r\n  loaded: 'loaded',\r\n  error: 'error'\r\n}","const get = (url) => fetch(url).then(resp => resp.json());\r\nconst post = (url, order) => fetch(url, {\r\n  method: 'POST',\r\n  body: order\r\n}).then(resp => resp.json());\r\n\r\nexport default {\r\n  loadRestaurants: () => get('/api/restaurants'),\r\n  loadReviews: (id) => get(`/api/reviews?id=${id}`),\r\n  loadProducts: (id) => get(`/api/products?id=${id}`),\r\n  loadUsers: () => get(`/api/users`),\r\n  makeOrder: (order) => post('/api/order', order)\r\n}","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport requests from \"../requests/requests\";\r\n\r\nimport {\r\n  addReview,\r\n} from '../features/reviews';\r\nimport produce from \"immer\";\r\n\r\n// --------------------------- Action ---------------------------\r\n\r\nexport const loadUsers = createAsyncThunk(\r\n  'users/load',\r\n  () => {\r\n    return requests.loadUsers()\r\n  }\r\n);\r\n\r\n// --------------------------- Reducer ---------------------------\r\n\r\nconst initState = {\r\n  entities: {},\r\n  error: null\r\n}\r\n\r\nconst { reducer } = createSlice({\r\n  name: 'reviews',\r\n  initialState: initState,\r\n  extraReducers: {\r\n    [loadUsers.pending.type]: (state) => {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n      }\r\n    },\r\n    [loadUsers.fulfilled.type]: (state, action) => {\r\n      const result = produce(state, draft => {\r\n        const entities = action.payload.reduce((acc, user) => (\r\n          {\r\n            ...acc,\r\n            [user.id]: user\r\n          }\r\n        ), {});\r\n        Object.assign(draft.entities, entities);\r\n      });\r\n\r\n      // МБ Придется статусы добавлять!\r\n      return {\r\n        ...result\r\n      }\r\n    },\r\n    [loadUsers.rejected.type]: (state, action) => {\r\n      console.log(action);\r\n      return {\r\n        ...state,\r\n        error: null\r\n      }\r\n    },\r\n    'reviews/add': (state, action) => { //FIXME Вместо addReview импортирования используем константу!\r\n      const { review } = action.payload;\r\n      const { userId } = action.meta;\r\n      \r\n      Object.assign(state.entities, { [userId]: { id: userId, name: review.name } })\r\n    }\r\n  }\r\n});\r\n\r\nexport default reducer;\r\n\r\n\r\n// --------------------------- Selectors ---------------------------\r\nconst usersMap = state => state.users.entities;\r\n\r\nexport const userByIdSelector = (state, { id }) => {\r\n  const user = usersMap(state)[id];\r\n\r\n  return user;\r\n}","import requests from '../requests/requests';\r\nimport { userByIdSelector } from './users';\r\nimport { push } from 'connected-react-router';\r\n\r\nimport {\r\n  createAction,\r\n  createAsyncThunk,\r\n  createSlice,\r\n  createEntityAdapter\r\n} from '@reduxjs/toolkit';\r\n\r\nimport {\r\n  STATUS\r\n} from '../constants/constants';\r\n\r\nexport const ADD_REVIEW = 'ADD_REVIEW';\r\nexport const FETCH_REVIEWS = 'FETCH_REVIEWS';\r\n\r\n// ------------------------------- Actions -------------------------------\r\n\r\nexport const addReview = createAction(\r\n  'reviews/add', // Название action-a\r\n  (review, props) => ( // Функция\r\n    {\r\n      type: ADD_REVIEW, //FIXME Можно убрать!\r\n      payload: { // Данные\r\n        review,\r\n        restaurantId: props.restaurantId,\r\n      },\r\n      meta: { // Служебные данные\r\n        generateId: ['reviewId', 'userId']\r\n      }\r\n    }\r\n  )\r\n);\r\n\r\nexport const loadReviews = createAsyncThunk(\r\n  'reviews/load',\r\n  (restaurantId, { dispatch }) => {\r\n    return requests.loadReviews(restaurantId).catch(error => {\r\n      dispatch(push('/error'));\r\n      throw error; //! Обязательно нужно выкидывать ошибку! Чтобы промис зареджектился\r\n    });\r\n  }\r\n);\r\n\r\n// ------------------------------- Reducer -------------------------------\r\n// Это сущность, которая в себе содержит объект с методами для работы с коллекциями\r\nconst Reviews = createEntityAdapter();\r\n\r\nconst initialState = {\r\n  ...Reviews.getInitialState(),\r\n  status: STATUS.empty,\r\n  error: null\r\n}\r\n\r\nconst { reducer } = createSlice({\r\n  name: 'reviews',\r\n  initialState,\r\n  reducers: {\r\n    // An object of \"case reducers\". Key names will be used to generate actions.\r\n    //reducers: Object<string, ReducerFunction | ReducerAndPrepareObject>\r\n\r\n    // Как я понял, тут мы и свои экшены формируем и редьюсеры, \r\n    // которые будут выполняться при этих экшенах!\r\n  },\r\n  extraReducers: {\r\n    // Т.к. экшены уже есть, \r\n    // нужно к ним просто редьюсеры(реакции на экшн!) привязать!\r\n    [loadReviews.pending.type]: (state, action) => {\r\n      return {\r\n        ...state,\r\n        status: STATUS.loading,\r\n        error: null\r\n      }\r\n    },\r\n    [loadReviews.fulfilled.type]: (state, action) => {\r\n      const { payload } = action;\r\n\r\n      const entities = payload.reduce((acc, review) => (\r\n        {\r\n          ...acc,\r\n          [review.id]: review\r\n        }\r\n      ), {});\r\n\r\n      state.status = STATUS.loaded;\r\n      Reviews.addMany(state, entities);\r\n    },\r\n    [loadReviews.rejected.type]: (state, action) => {\r\n\r\n      const { error } = action;\r\n\r\n      return {\r\n        ...state,\r\n        status: STATUS.error,\r\n        error: error\r\n      }\r\n    },\r\n    [addReview.type]: (state, action) => {\r\n\r\n      const { review } = action.payload;\r\n      const { reviewId, userId } = action.meta;\r\n\r\n      Reviews.addOne(state, {\r\n        id: reviewId,\r\n        userId,\r\n        text: review.text,\r\n        rating: review.rating\r\n      });\r\n    }\r\n  }\r\n});\r\n\r\nexport default reducer;\r\n\r\n// ------------------------------- Selectors -------------------------------\r\nexport const reviewsMap = state => state.reviews.entities;\r\n\r\nexport const reviewByIdSelector = (state, props) => {\r\n  return reviewsMap(state)[props.id];\r\n}\r\n\r\nexport const reviewByIdWithUserSelector = (state, props) => {\r\n  const review = reviewsMap(state)[props.id];\r\n  const user = userByIdSelector(state, { id: review.userId });\r\n\r\n  return {\r\n    id: review.id,\r\n    text: review.text,\r\n    rating: review.rating,\r\n    user: {\r\n      ...user\r\n    }\r\n  }\r\n}","import { createSelector } from '@reduxjs/toolkit';\r\nimport { STATUS } from './constants/constants';\r\nimport { reviewsMap } from './features/reviews';\r\n\r\nexport const productMap = state => state.products.entities;\r\nconst restaurantsMap = state => state.restaurants.entities;\r\n\r\n// ---------------------------- Current Restaurants ----------------------------\r\n\r\n\r\n// ---------------------------- Restaurants ----------------------------\r\nexport const restaurantsLoadingSelector = state => state.restaurants.status === STATUS.loading;\r\nexport const restaurantsLoadedSelector = state => state.restaurants.status === STATUS.loaded;\r\n\r\nexport const restaurantReviewsLoadingSelector = state => state.reviews.status === STATUS.loading;\r\nexport const restaurantReviewsLoadedSelector = state => state.reviews.status === STATUS.loaded;\r\n\r\nexport const restaurantListSelector = createSelector([restaurantsMap], (restaurantsMap) => {\r\n  return Object.values(restaurantsMap);\r\n});\r\n\r\n//FIXME Сделать более красивым\r\nexport const restaurantByProductId = (state, { product }) => {\r\n  const result = restaurantListSelector(state).filter(rest => {\r\n    const menu = rest.menu.find(menu => menu === product.id);\r\n    if (menu) return rest;\r\n  });\r\n\r\n  return result[0];\r\n}\r\n\r\nexport const restaurantByIdSelector = ((state, { id }) => {\r\n  return restaurantsMap(state)[id];\r\n});\r\n\r\nexport const restaurantReviewsListSelector = (state, { id }) => {\r\n  const reviewList = restaurantsMap(state)[id].reviews.map(key => {\r\n    return reviewsMap(state)[key];\r\n  })\r\n  return reviewList; // просто список, не map\r\n};\r\n\r\nexport const averageRatingSelector = createSelector(\r\n  restaurantByIdSelector,\r\n  reviewsMap,\r\n  (restaurant, reviews) => {\r\n    const ratings = restaurant.reviews.map((id) => reviews[id]?.rating || 0);\r\n    return Math.round(\r\n      ratings.reduce((acc, rating) => acc + rating, 0) / ratings.length\r\n    );\r\n  });\r\n\r\n// ---------------------------- Products -------------------------------\r\nexport const productLoadingSelector = state => state.products.status === STATUS.loading;\r\nexport const productLoadedSelector = state => state.products.status === STATUS.loaded;\r\n\r\nexport const productByIdSelector = (state, id) => {\r\n  const product = productMap(state)[id];\r\n\r\n  return product;\r\n};\r\n\r\n// ---------------------------- Order ----------------------------------\r\n\r\n\r\n// ---------------------------- Review ----------------------------------\r\n\r\n\r\n// ---------------------------- Users ----------------------------------\r\n\r\n\r\n","import { createAsyncThunk, createSelector, createSlice } from '@reduxjs/toolkit';\r\nimport { STATUS } from '../constants/constants';\r\nimport requests from '../requests/requests';\r\nimport { productMap } from '../selectors';\r\n\r\nexport const makeOrder = createAsyncThunk(\r\n  'order/make',\r\n  (order) => {\r\n    const data = requests.makeOrder(order);\r\n    return data;\r\n  }\r\n);\r\n\r\n// ----------------------------------- Slice (reducer + actions) -----------------------------------\r\n\r\nconst initState = {\r\n  entities: {},\r\n  status: STATUS.empty, //TODO Вынести в serverResponse\r\n  serverResponse: {}\r\n}\r\n\r\nconst { reducer, actions } = createSlice({\r\n  name: 'order',\r\n  initialState: initState,\r\n  reducers: {\r\n    increment: (state, { payload: id }) => {\r\n      return {\r\n        ...state,\r\n        entities: {\r\n          ...state.entities,\r\n          [id]: (state.entities[id] || 0) + 1\r\n        }\r\n      }\r\n    },\r\n    decrement: (state, { payload: id }) => {\r\n      return {\r\n        ...state,\r\n        entities: {\r\n          ...state.entities,\r\n          [id]: state.entities[id] > 0 ? state.entities[id] - 1 : 0\r\n        }\r\n      }\r\n    },\r\n    remove: (state, { payload: id }) => {\r\n      return {\r\n        ...state,\r\n        entities: {\r\n          ...state.entities,\r\n          [id]: 0\r\n        }\r\n      }\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [makeOrder.pending.type]: (state) => {\r\n      return {\r\n        ...state,\r\n        status: STATUS.loading,\r\n        serverResponse: {\r\n          ...state.serverResponse,\r\n          error: null\r\n        }\r\n      }\r\n    },\r\n    [makeOrder.fulfilled.type]: (state, action) => {\r\n      const { payload } = action;\r\n      return {\r\n        ...state,\r\n        entities: {}, // При удачном ответе от сервера, очищается корзина!\r\n        status: STATUS.loaded,\r\n        serverResponse: payload\r\n      }\r\n    },\r\n    [makeOrder.rejected.type]: (state, action) => {\r\n      return {\r\n        ...state,\r\n        status: STATUS.error,\r\n        serverResponse: {\r\n          ...state.serverResponse,\r\n          error: null\r\n        }\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nconst { increment, decrement, remove, clearOrder } = actions;\r\n\r\nexport default reducer;\r\nexport { increment, decrement, remove, clearOrder };\r\n\r\n// ----------------------------------- Selectors -----------------------------------\r\nconst order = state => state.order;\r\n\r\nexport const orderList = state => order(state).entities;\r\n\r\nexport const orderResponseStatus = state => order(state).status;\r\n\r\n//TODO Оптимизировать этот метод!\r\nexport const orderedProductsSelector = createSelector(\r\n  // Массив значений, от которых зависит, будет ли пересчитываться функция\r\n  [productMap, orderList],\r\n  (products, order) => {\r\n    const orderIds = Object.keys(order);\r\n    const productArray = Object.keys(products).map(key => products[key]);\r\n    return productArray.filter(product => orderIds.includes(product.id)).map(product => {\r\n      return {\r\n        ...product,\r\n        amount: order[product.id]\r\n      }\r\n    })\r\n  });\r\n\r\nexport const totalOrderPriceSelector = createSelector([orderedProductsSelector], (product) => {\r\n  return product.reduce((acc, { amount, price }) => acc + amount * price, 0)\r\n});\r\n\r\nexport const orderProductAmountSelector = (state, props) => {\r\n  return orderList(state)[props.id];\r\n}\r\n","import CurrencySwitcher from '../currency-switcher/currency-switcher';\r\nimport style from './header.module.css';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faShoppingBasket } from '@fortawesome/free-solid-svg-icons';\r\nimport { totalOrderPriceSelector } from '../../redux/features/order';\r\nimport { connect } from 'react-redux';\r\nimport { MoneyContext } from '../../context/money-context';\r\nimport { useContext } from 'react';\r\n\r\nfunction Header({ totalOrderCost }) {\r\n\r\n  const { recalculatePrice } = useContext(MoneyContext);\r\n\r\n  return (\r\n    <div className={style.header}>\r\n      <Link to='/restaurants' className={style.logo}>\r\n        <img src={process.env.PUBLIC_URL + '/logo100_120.png'} alt=\"coming soon...\" />\r\n        <p>Consegna del cibo</p>\r\n      </Link>\r\n      <CurrencySwitcher />\r\n      <div className={style.menu}>\r\n        <ul>\r\n          <li>\r\n            <NavLink to=\"/restaurants\"\r\n              activeClassName={style.active}\r\n            >\r\n              Home\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to=\"/about\"\r\n              activeClassName={style.active}\r\n            >\r\n              About\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to=\"/contacts\"\r\n              activeClassName={style.active}\r\n            >\r\n              Contacts\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to=\"/faq\"\r\n              activeClassName={style.active}\r\n            >\r\n              FAQ\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink\r\n              to='/checkout'\r\n              className={style.checkout}\r\n              activeClassName={style.active}\r\n            >\r\n              <FontAwesomeIcon icon={faShoppingBasket} />{recalculatePrice(totalOrderCost)}\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  return {\r\n    totalOrderCost: totalOrderPriceSelector(state)\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Header);","import style from './hero.module.css';\r\n\r\nexport default function Hero() {\r\n  return (\r\n    <div className={style.hero} id=\"hero\">\r\n      <h1>Consegna del cibo</h1>\r\n      <h2>Best Restaurant Agrigation</h2>\r\n    </div>\r\n  )\r\n}","import { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { restaurantListSelector } from '../../redux/selectors';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport style from './navigation.module.css';\r\n\r\nfunction Navigation({ restaurants, onRestaurantClick }) {\r\n\r\n  return (\r\n    <div className={style.navContainer}>\r\n      <h1>Our Restaurants:</h1>\r\n      <div className={style.navigation}>\r\n        {\r\n          restaurants.map(restaurant => {\r\n            return (\r\n              <Link\r\n                key={restaurant.id}\r\n                className={style.nav}\r\n                style={{ backgroundImage: `url(${restaurant.image})` }}\r\n                onClick={() => onRestaurantClick(restaurant.id)}\r\n                to={`/restaurants/${restaurant.id}`}\r\n              >\r\n                <h2>{restaurant.name}</h2>\r\n              </Link>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => (\r\n  {\r\n    restaurants: restaurantListSelector(state)\r\n  }\r\n)\r\n\r\nexport default connect(mapStateToProps)(Navigation);","import Navigation  from \"./navigation\";\r\n\r\nexport default Navigation;","import style from './loader.module.css';\r\n\r\nfunction Loader() {\r\n  return (\r\n    <div className={style.loader}>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loader;","import Loader from \"./loader\";\r\n\r\nexport default Loader;","import style from './error-page.module.css';\r\n\r\nexport default function ErrorPage() {\r\n  return (\r\n    <div className={style.error}>\r\n      <h1>Page NOT found!</h1>\r\n    </div>\r\n  )\r\n}","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\n// ------------------------ Slice -----------------------------\r\nconst initState = {\r\n  currentRestaurantId: null\r\n}\r\n\r\nconst { reducer, actions } = createSlice({\r\n  name: 'current_restaurant',\r\n  initialState: initState,\r\n  reducers: {\r\n    setCurrentRestaurant: (state, action) => {\r\n      const { payload } = action;\r\n\r\n      state.currentRestaurantId = payload;\r\n    }\r\n  }\r\n})\r\nconst { setCurrentRestaurant } = actions;\r\n\r\nexport default reducer;\r\nexport { setCurrentRestaurant };\r\n\r\n// ------------------------ Selectors -----------------------------\r\nconst currentRestaurantSelector = state => state.currentRestaurant;\r\n\r\nexport const currentRestaurantIdSelector = state => {\r\n  return currentRestaurantSelector(state).currentRestaurantId;\r\n}\r\n","import Loader from '../loader';\r\nimport { connect } from 'react-redux';\r\n\r\nimport {\r\n  increment,\r\n  decrement,\r\n} from '../../redux/features/order';\r\n\r\nimport {\r\n  productByIdSelector,\r\n  productLoadingSelector,\r\n  productLoadedSelector\r\n} from '../../redux/selectors';\r\n\r\nimport { orderProductAmountSelector } from '../../redux/features/order';\r\n\r\nimport style from './product.module.css';\r\nimport { useContext } from 'react';\r\nimport { MoneyContext } from '../../context/money-context';\r\n\r\nfunction Product(props) {\r\n\r\n  const { product, amount, increment, decrement, loading, loaded } = props;\r\n  const { recalculatePrice } = useContext(MoneyContext);\r\n\r\n  return (\r\n    <div\r\n      className={style.product}\r\n      data-test=\"product\"\r\n    >\r\n      {(loading || !loaded) ?\r\n        <Loader />\r\n        :\r\n        <>\r\n          <div className={style.description}>\r\n            <h2>{product.name}</h2>\r\n            <p>{recalculatePrice(product.price)}</p>\r\n            <p>{product.ingredients.join(\", \")}</p>\r\n          </div>\r\n          <div className={style.order}>\r\n            <button data-test=\"product-decrement\" onClick={decrement}>-</button>\r\n            <p data-test=\"product-amount\">{amount || 0}</p>\r\n            <button onClick={increment}>+</button>\r\n          </div>\r\n        </>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state, props) => (\r\n  {\r\n    loading: productLoadingSelector(state),\r\n    loaded: productLoadedSelector(state),\r\n    amount: orderProductAmountSelector(state, props),\r\n    product: productByIdSelector(state, props.id)\r\n  }\r\n)\r\n\r\nconst mapDispatchToProps = (dispatch, props) => ({\r\n  increment: () => dispatch(increment(props.id)),\r\n  decrement: () => dispatch(decrement(props.id)),\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Product);\r\n\r\n","import Menu from './menu';\r\n\r\nexport default Menu;","import { Component } from 'react';\r\nimport Product from '../product/product';\r\n\r\nimport style from './menu.module.css';\r\n\r\nclass Menu extends Component {\r\n\r\n  render() {\r\n    const { menu } = this.props;\r\n\r\n    return (\r\n      <div className={style.menu}>\r\n        {\r\n          menu.map((id) => {\r\n            return <Product key={id} id={id} />\r\n          })\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Menu;","import Rate from './rate';\r\n\r\nexport default Rate;","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  faStar,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport style from './rate.module.css';\r\nimport { useState } from 'react';\r\n\r\nexport default function Rate({ rating, handleRateChange }) {\r\n\r\n  // Меняется ТОЛЬКО если у нас приходит функция, которая меняет рейтинг\r\n  const [rate, setRate] = useState(undefined);\r\n\r\n  return (\r\n    <div>\r\n      {\r\n        [...Array(5)].map((_, idx) => {\r\n          return <div\r\n            key={idx}\r\n            // Если функцию не передали в пропы!\r\n            onClick={handleRateChange ? (() => {\r\n              handleRateChange(idx + 1);\r\n              setRate(idx + 1);\r\n            })\r\n              :\r\n              (undefined)\r\n            }\r\n            className={!rate ?\r\n              (idx < rating ? style.red : style.white)\r\n              :\r\n              (idx < rate ? style.red : style.white)}\r\n          >\r\n            <i><FontAwesomeIcon icon={faStar} /></i>\r\n          </div>\r\n        })\r\n      }\r\n    </div >\r\n  )\r\n}","import { connect } from 'react-redux';\r\nimport {\r\n  reviewByIdWithUserSelector,\r\n} from '../../../redux/features/reviews';\r\n\r\nimport Loader from '../../loader/loader';\r\n\r\nimport Rate from '../../rate';\r\n\r\nimport style from './review.module.css';\r\n\r\nfunction Review(props) {\r\n\r\n  const { id, reviewWithUser } = props;\r\n\r\n  if (!reviewWithUser) return <Loader />;\r\n\r\n  const { text, rating, user } = reviewWithUser;\r\n\r\n  return (\r\n    <div\r\n      className={style.reviewContainer}\r\n      data-test=\"reviews\"\r\n    >\r\n      <div className={style.review}>\r\n        <div className={style.author}>\r\n          <h4>Author: {user.name}</h4>\r\n        </div>\r\n        <div className={style.info}>\r\n          <p>{text}</p>\r\n          <Rate rating={rating} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state, props) => (\r\n  {\r\n    reviewWithUser: reviewByIdWithUserSelector(state, props),\r\n  }\r\n)\r\n\r\nexport default connect(mapStateToProps)(Review);\r\n","import cn from 'classnames';\r\n\r\nimport style from './validation-pop-up.module.css';\r\n\r\nexport default function ValidationPopUp({ message }) {\r\n  return (\r\n    <div className={cn(style.validation)}>\r\n      <h1>{message}</h1>\r\n    </div>\r\n  )\r\n}","import { connect } from \"react-redux\";\r\nimport { useState } from \"react\";\r\nimport Rate from '../../rate';\r\nimport { addReview } from '../../../redux/features/reviews';\r\n\r\nimport style from './review-form.module.css';\r\nimport ValidationPopUp from \"../../validation-pop-up/validation-pop-up\";\r\n\r\nconst INIT_FORM_STATE = {\r\n  name: '',\r\n  text: '',\r\n  rating: ''\r\n};\r\n\r\nfunction ReviewForm({ handleSubmit }) {\r\n\r\n  const [formValues, setFormValues] = useState(INIT_FORM_STATE);\r\n  const [isFormValid, setIsFormValid] = useState(true);\r\n\r\n  //TODO Вынести в свой собственный ХУК\r\n  const handleInputChange = (event) => {\r\n    const target = event.target;\r\n    const value = target.type === 'checkbox' ? target.checked : target.value;\r\n    const name = target.name;\r\n\r\n    setFormValues(\r\n      {\r\n        ...formValues,\r\n        [name]: value\r\n      }\r\n    )\r\n  }\r\n\r\n  const handleRateChange = (idx) => {\r\n    setFormValues(\r\n      {\r\n        ...formValues,\r\n        rating: idx\r\n      }\r\n    )\r\n  }\r\n\r\n  const handleFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (validateFormValues(formValues)) {\r\n      handleSubmit(formValues)\r\n    }\r\n    //TODO Добавить способ обнуления значений формы!\r\n  }\r\n\r\n  const validateFormValues = () => {\r\n    if (formValues.name === '' || formValues.text === '') {\r\n      setIsFormValid(false);\r\n      setTimeout(() => {\r\n        setIsFormValid(true);\r\n      }, 5000);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isFormValid ? '' : <ValidationPopUp message={'Invalid Form Data'} />}\r\n      <div div className={style.reviewForm} >\r\n        <form onSubmit={handleFormSubmit}>\r\n          <label htmlFor=\"user\">User</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"insert username\"\r\n            onChange={handleInputChange}\r\n          />\r\n          <label htmlFor=\"review\">Review</label>\r\n          <textarea\r\n            name=\"text\"\r\n            placeholder=\"review\"\r\n            onChange={handleInputChange}\r\n          />\r\n          <div>\r\n            <Rate handleRateChange={handleRateChange} />\r\n          </div>\r\n          <button>Add review</button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n  return {\r\n    handleSubmit: (review) => dispatch(addReview(review, props))\r\n  }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(ReviewForm);","import { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Review from './review/review';\r\nimport Loader from '../loader/loader';\r\nimport ReviewForm from '../reviews/review-form/review-form';\r\n\r\nimport {\r\n  loadUsers,\r\n} from '../../redux/features/users';\r\n\r\nimport {\r\n  loadReviews,\r\n} from '../../redux/features/reviews';\r\n\r\nimport {\r\n  restaurantReviewsListSelector,\r\n  restaurantReviewsLoadedSelector,\r\n  restaurantReviewsLoadingSelector\r\n} from '../../redux/selectors';\r\n\r\nimport style from './reviews.module.css';\r\n\r\nfunction Reviews(\r\n  {\r\n    reviews,\r\n    loadReviews,\r\n    loadUsers,\r\n    restaurantId,\r\n    reviewsIsLoading,\r\n    reviewsIsLoaded }\r\n) {\r\n\r\n  useEffect((restaurantId) => {\r\n    loadReviews(restaurantId);\r\n    loadUsers();\r\n  }, [restaurantId])\r\n\r\n  if (reviewsIsLoading || !reviewsIsLoaded) return <Loader />;\r\n  return (\r\n    <div\r\n      className={style.reviews}\r\n      data-test=\"reviews\"\r\n    >\r\n      {\r\n        reviews.map(review => {\r\n          return <Review key={review.id} id={review.id} />\r\n        })\r\n      }\r\n      <ReviewForm restaurantId={restaurantId} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state, props) => (\r\n  {\r\n    reviews: restaurantReviewsListSelector(state, { id: props.restaurantId }),\r\n    reviewsIsLoading: restaurantReviewsLoadingSelector(state),\r\n    reviewsIsLoaded: restaurantReviewsLoadedSelector(state),\r\n  }\r\n)\r\n\r\nexport default connect(mapStateToProps, { loadReviews, loadUsers })(Reviews);\r\n","import { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link, NavLink, Route, Switch } from 'react-router-dom';\r\nimport { loadCurrentRestaurantProducts } from '../../../redux/actions/action';\r\nimport { currentRestaurantIdSelector } from '../../../redux/features/currentRestaurant';\r\nimport {\r\n  averageRatingSelector,\r\n  restaurantByIdSelector\r\n} from '../../../redux/selectors';\r\nimport Menu from '../../menu';\r\nimport Rate from '../../rate';\r\nimport Reviews from '../../reviews/reviews';\r\nimport style from './restaurant.module.css';\r\n\r\nfunction Restaurant(\r\n  {\r\n    currentRestaurantId,\r\n    loadCurrentRestaurantProducts,\r\n    restaurant,\r\n    averageRating\r\n  }\r\n) {\r\n\r\n  useEffect(() => {\r\n    loadCurrentRestaurantProducts(currentRestaurantId);\r\n  }, [currentRestaurantId])\r\n\r\n  return (\r\n    <div className={style.restaurant}>\r\n      <h3>{restaurant.name}</h3>\r\n      {!!averageRating && <Rate rating={averageRating} />}\r\n      <div className={style.switcher}>\r\n        <NavLink\r\n          to={`/restaurants/${restaurant.id}/menu`}\r\n          activeClassName={style.active}\r\n        >\r\n          Menu\r\n        </NavLink>\r\n        <NavLink\r\n          to={`/restaurants/${restaurant.id}/reviews`}\r\n          activeClassName={style.active}\r\n        >\r\n          Reviews\r\n        </NavLink>\r\n      </div>\r\n      <Switch>\r\n        <Route path='/restaurants/:restId/menu'>\r\n          <Menu menu={restaurant.menu} />\r\n        </Route>\r\n        <Route path='/restaurants/:restId/reviews'>\r\n          <Reviews restaurantId={restaurant.id} />\r\n        </Route>\r\n        <Route path='/restaurants/:restId'>\r\n          <Menu menu={restaurant.menu} />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  return {\r\n    currentRestaurantId: currentRestaurantIdSelector(state),\r\n    restaurant: restaurantByIdSelector(state, props),\r\n    averageRating: averageRatingSelector(state, props)\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { loadCurrentRestaurantProducts })(Restaurant);\r\n","import Restaurant from \"./restaurant\";\r\n\r\nexport default Restaurant;","import {\r\n  FETCH_CURRENT_REST_PRODUCTS,\r\n  FETCH_RESTAURANTS,\r\n  LOADING,\r\n  LOADED,\r\n  ERROR,\r\n} from '../constants/constants';\r\nimport requests from '../requests/requests';\r\n\r\nexport const loadRestaurants = () => (\r\n  {\r\n    type: FETCH_RESTAURANTS,\r\n    callApi: () => requests.loadRestaurants()\r\n  }\r\n);\r\n\r\nexport const loadCurrentRestaurantProducts = (curRestId) => async (dispatch) => {\r\n  dispatch({ type: FETCH_CURRENT_REST_PRODUCTS + LOADING });\r\n\r\n  try {\r\n    const data = await requests.loadProducts(curRestId);\r\n    dispatch({ type: FETCH_CURRENT_REST_PRODUCTS + LOADED, data, curRestId });\r\n  } catch (error) {\r\n    dispatch({ type: FETCH_CURRENT_REST_PRODUCTS + ERROR, curRestId });\r\n  }\r\n}","import { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Navigation from '../navigation';\r\nimport Loader from '../loader';\r\nimport ErrorPage from '../error-page/error-page';\r\nimport Restaurant from './restaurant';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\n\r\nimport {\r\n  restaurantListSelector,\r\n  restaurantsLoadingSelector,\r\n  restaurantsLoadedSelector,\r\n} from '../../redux/selectors';\r\n\r\nimport {\r\n  loadRestaurants,\r\n} from '../../redux/actions/action';\r\n\r\nimport {\r\n  setCurrentRestaurant,\r\n  currentRestaurantIdSelector\r\n} from '../../redux/features/currentRestaurant';\r\n\r\nimport style from './restaurants.module.css';\r\n\r\nfunction Restaurants(\r\n  {\r\n    allRestaurants,\r\n    currentRestaurantId,\r\n    loadRestaurants,\r\n    setCurrentRestaurant,\r\n    loading,\r\n    loaded,\r\n  }\r\n) {\r\n\r\n  useEffect(() => {\r\n    if (!loading && !loaded) {\r\n      loadRestaurants();\r\n    }\r\n  }, [loading, loaded]);\r\n\r\n  if (!loaded) {\r\n    return <Loader />;\r\n  }\r\n\r\n  return (\r\n    <div className={style.restaurants}>\r\n      <Navigation onRestaurantClick={setCurrentRestaurant} />\r\n      <Switch>\r\n        <Route path={'/restaurants/:restId'}>\r\n          {/* Роутинг функция, не уверен, что это хорошее решение! */}\r\n          {\r\n            ({ match }) => {\r\n              const restId = match.params.restId;\r\n              const isRestExist = allRestaurants.find(restaurant => restaurant.id === restId);\r\n              if (isRestExist) {\r\n                currentRestaurantId = restId;\r\n                return <Restaurant id={currentRestaurantId} />\r\n              }\r\n              return <ErrorPage />\r\n            }\r\n          }\r\n        </Route>\r\n        <Redirect to={`/restaurants/${allRestaurants[0]?.id}`} />\r\n        <Route component={() => <h1>Select Restaurant</h1>} />\r\n      </Switch>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentRestaurantId: currentRestaurantIdSelector(state),\r\n    allRestaurants: restaurantListSelector(state), // Загрузили все для всего приложения рестораны!\r\n    loading: restaurantsLoadingSelector(state),\r\n    loaded: restaurantsLoadedSelector(state)\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { loadRestaurants, setCurrentRestaurant })(Restaurants);","import Restaurants from \"./restaurants\";\r\n\r\nexport default Restaurants;","import { connect } from 'react-redux';\r\nimport { increment, decrement, remove } from '../../../redux/features/order';\r\nimport { Link } from 'react-router-dom';\r\nimport { restaurantByProductId } from '../../../redux/selectors';\r\n\r\nimport style from './basketItem.module.css';\r\n\r\nfunction BasketItem({ product, restaurant, increment, decrement, remove }) {\r\n\r\n  const { name, amount } = product;\r\n\r\n  if (amount === 0) return null; //TODO Так нормально?\r\n\r\n  return (\r\n    <div className={style.basketItem}>\r\n      <Link to={`/restaurants/${restaurant.id}`}>\r\n        <div className={style.info}>\r\n          <h3>{name}</h3>\r\n        </div>\r\n      </Link>\r\n      <div className={style.baksetOrder}>\r\n        <button onClick={increment}>+</button>\r\n        <p>{amount}</p>\r\n        <button onClick={decrement}>-</button>\r\n        <button onClick={remove}>x</button>\r\n        {/*TODO Можно добавить цену на конкретный товар */}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  return {\r\n    restaurant: restaurantByProductId(state, props)\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, props) => ({\r\n  increment: () => dispatch(increment(props.product.id)),\r\n  decrement: () => dispatch(decrement(props.product.id)),\r\n  remove: () => dispatch(remove(props.product.id))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BasketItem);","import BasketItem from \"./basketItem\";\r\n\r\nexport default BasketItem;","import { faShoppingBasket } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { MoneyContext } from '../../context/money-context';\r\nimport { STATUS } from '../../redux/constants/constants';\r\nimport {\r\n  makeOrder,\r\n  orderedProductsSelector,\r\n  orderList,\r\n  clearOrder,\r\n  totalOrderPriceSelector,\r\n  orderResponseStatus\r\n} from '../../redux/features/order';\r\nimport style from './basket.module.css';\r\nimport BasketItem from \"./basketItem\";\r\nimport Loader from '../loader';\r\n\r\nfunction Basket({ products, totalOrderCost, makeOrder, orderList, status, clearOrder }) {\r\n\r\n  const [isDisabled, setIsDisabled] = useState(false);\r\n  const { recalculatePrice } = useContext(MoneyContext);\r\n\r\n  useEffect(() => {\r\n    switch (status) {\r\n      case STATUS.loading: {\r\n        setIsDisabled(true);\r\n        break;\r\n      }\r\n      case STATUS.loaded: {\r\n        setIsDisabled(false);\r\n        break;\r\n      }\r\n    }\r\n  }, [status]);\r\n\r\n  if (!STATUS.loaded) return <Loader />;\r\n\r\n  return (\r\n    <div className={style.basket}>\r\n      <i><FontAwesomeIcon icon={faShoppingBasket} />Your Order: </i>\r\n      {\r\n        products.map(product => {\r\n          return <BasketItem key={product.id} product={product} />\r\n        })\r\n      }\r\n      <h3>Total Cost: {recalculatePrice(totalOrderCost)}</h3>\r\n      <Link to=\"/order-status\">\r\n        <button disabled={isDisabled ? 'disabled' : ''} onClick={() => makeOrder(orderList)}>Checkout</button>\r\n      </Link>\r\n    </div>\r\n  )\r\n}\r\n\r\n// Важно, передается state и props самого объекта Product!\r\nconst mapStateToProps = (state) => {\r\n\r\n  return {\r\n    orderList: orderList(state),\r\n    products: orderedProductsSelector(state),\r\n    totalOrderCost: totalOrderPriceSelector(state),\r\n    status: orderResponseStatus(state),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { makeOrder, clearOrder })(Basket);","import Basket from \"./basket\";\r\n\r\nexport default Basket;","import { useContext } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { totalOrderPriceSelector } from '../../redux/features/order';\r\nimport { MoneyContext } from '../../context/money-context';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faShoppingBasket } from '@fortawesome/free-solid-svg-icons';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport style from './card.module.css';\r\n\r\nfunction Card({ totalOrderCost }) {\r\n\r\n  const { recalculatePrice } = useContext(MoneyContext);\r\n\r\n  return (\r\n    <Link to='/checkout'>\r\n      <div className={style.card}>\r\n        <i><FontAwesomeIcon icon={faShoppingBasket} />{recalculatePrice(totalOrderCost)}</i>\r\n      </div>\r\n    </Link>\r\n  )\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  totalOrderCost: totalOrderPriceSelector(state)\r\n});\r\n\r\nexport default connect(mapStateToProps)(Card);","import style from './order-status.module.css';\r\nimport { Switch, Route, Link, Redirect } from 'react-router-dom';\r\nimport { useEffect } from 'react';\r\n\r\nexport default function OrderStatus(props) {\r\n\r\n  return (\r\n    <div className={style.order}>\r\n      Your order has been successfully completed!\r\n      <Link to={\"/restaurants\"}>\r\n        <button>Go to restaurants</button>\r\n      </Link>\r\n    </div>\r\n  )\r\n}","import cn from 'classnames';\r\n\r\nimport style from './contacts.module.css';\r\n\r\n\r\nexport default function Contacts() {\r\n  return (\r\n    <div className={cn(style.contacts)}>\r\n      <a href=\"https://github.com/y-dubovitsky\" target=\"_blank\">Мой профиль на GitHub</a>\r\n      <h3>Электронная почта:</h3>\r\n      y.dubovitsky@gmail.com\r\n      </div>\r\n  )\r\n}","import cn from 'classnames';\r\n\r\nimport style from './faq.module.css';\r\n\r\nexport default function FAQ() {\r\n  return (\r\n    <div className={cn(style.faq)}>\r\n      <h2>Какие основные технологии и библиотеки использовались при реализации проекта?</h2>\r\n      <ol>\r\n        <li>React и его экосистема.</li>\r\n        <li>React Hooks, их отличия от стейта и lifecycle методов.</li>\r\n        <li>Тестирования компонент с помощью Jest и Enzyme.</li>\r\n        <li>Redux + Immutable.js.</li>\r\n        <li>React-redux для связи компонентов с логикой.</li>\r\n        <li>React для SPA: react-router и продвинутые API Реакта.</li>\r\n        <li>Redux dev tools.</li>\r\n        <li>Side-effects в Redux: создание и использование Middlewares.</li>\r\n        <li>Получение данных от сервера.</li>\r\n        <li>Асинхронные экшены с redux-thunk.</li>\r\n        <li>React Context.</li>\r\n        <li>React-router.</li>\r\n        <li>Объедин react-router и Redux.</li>\r\n        <li><h3>И многое другое =)</h3></li>\r\n      </ol>\r\n    </div>\r\n  )\r\n}","import cn from 'classnames';\r\n\r\nimport style from './about.module.css';\r\n\r\nexport default function About() {\r\n  return (\r\n    <div className={cn(style.about)}>\r\n      <h2>Моя реализация проекта после прохождения курса на https://learn.javascript.ru/</h2>\r\n      <a href=\"https://learn.javascript.ru/courses/react\" target=\"_blank\" rel=\"noopener noreferrer\">https://learn.javascript.ru/courses/react</a>\r\n      <img src={process.env.PUBLIC_URL + '/certificate.jpg'} alt=\"\" />\r\n      <h2>Вопросы, предложения и претензии по качеству направляйте на почту</h2>\r\n      <h4>y.dubovitsky@gmail.com</h4>\r\n    </div>\r\n  )\r\n}","import React, { Component } from 'react';\r\nimport Description from './description/description';\r\nimport Footer from './footer/footer';\r\nimport Header from './header/header';\r\nimport Hero from './hero/hero';\r\nimport Restaurants from './restaurants';\r\nimport Basket from './basket';\r\nimport Card from './card/card';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport ErrorPage from './error-page/error-page';\r\nimport OrderStatus from './order-status/order-status';\r\nimport Contacts from './contacts/contacts';\r\nimport FAQ from './faq/faq';\r\nimport About from './about/about';\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <Hero />\r\n        <Description />\r\n        <Switch>\r\n          <Redirect exact from=\"/\" to=\"/restaurants\" />\r\n          <Route path=\"/checkout\" component={Basket} />\r\n          <Route path=\"/contacts\" component={Contacts} />\r\n          <Route path=\"/about\" component={About} />\r\n          <Route path=\"/faq\" component={FAQ} />\r\n          <Route path=\"/restaurants\" component={Restaurants} />\r\n          <Route path=\"/order-status\" component={OrderStatus} />\r\n          <Route path=\"/error\" component={ErrorPage} />\r\n        </Switch>\r\n        <Card />\r\n        <Footer />\r\n      </div>\r\n    )\r\n  }\r\n}","import {\r\n  ERROR,\r\n  FETCH_RESTAURANTS,\r\n  LOADED,\r\n  LOADING,\r\n  STATUS\r\n} from '../constants/constants';\r\n\r\nimport {\r\n  addReview,\r\n} from '../features/reviews';\r\n\r\nconst initState = {\r\n  status: STATUS.empty,\r\n  entities: {},\r\n  error: null\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n  const {\r\n    type,\r\n    payload,\r\n    meta,\r\n    data,\r\n    error } = action;\r\n\r\n  switch (type) {\r\n    case FETCH_RESTAURANTS + LOADING: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        status: STATUS.loading\r\n      }\r\n    }\r\n    case FETCH_RESTAURANTS + LOADED: {\r\n      const entities = data.reduce((acc, rest) => (\r\n        {\r\n          ...acc,\r\n          [rest.id]: rest\r\n        }\r\n      ), {});\r\n\r\n      return {\r\n        ...state,\r\n        status: STATUS.loaded,\r\n        entities\r\n      }\r\n    }\r\n    case FETCH_RESTAURANTS + ERROR: {\r\n      return {\r\n        ...state,\r\n        status: STATUS.error,\r\n        error: error\r\n      }\r\n    }\r\n    case addReview.type: {\r\n\r\n      const { reviewId } = meta;\r\n      const { restaurantId } = payload;\r\n\r\n      return {\r\n        ...state,\r\n        entities: {\r\n          ...state.entities,\r\n          [restaurantId]: {\r\n            ...state.entities[restaurantId],\r\n            reviews: [\r\n              ...state.entities[restaurantId].reviews,\r\n              reviewId\r\n            ]\r\n          }\r\n        }\r\n      }\r\n    }\r\n    default: return state\r\n  }\r\n}","import { createNextState as produce } from '@reduxjs/toolkit';\r\nimport {\r\n  ERROR,\r\n  FETCH_CURRENT_REST_PRODUCTS,\r\n  LOADED,\r\n  LOADING,\r\n  STATUS\r\n} from '../constants/constants';\r\n\r\nconst initState = {\r\n  status: STATUS.empty,\r\n  entities: {},\r\n  error: null\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n\r\n  const { type, data, error } = action;\r\n\r\n  switch (type) {\r\n    case FETCH_CURRENT_REST_PRODUCTS + LOADING: {\r\n\r\n      console.log(state);\r\n\r\n      return {\r\n        ...state,\r\n        status: STATUS.loading,\r\n        error: null\r\n      }\r\n    }\r\n    case FETCH_CURRENT_REST_PRODUCTS + LOADED: {\r\n      const entities = data.reduce((acc, product) => {\r\n        return {\r\n          ...acc,\r\n          [product.id]: {\r\n            ...product\r\n          }\r\n        }\r\n      }, {});\r\n\r\n      return produce(state, draft => {\r\n        Object.assign(draft.entities, entities);\r\n        draft.status = STATUS.loaded;\r\n      });\r\n    }\r\n    case FETCH_CURRENT_REST_PRODUCTS + ERROR: {\r\n      return {\r\n        ...state,\r\n        error,\r\n        status: STATUS.error\r\n      }\r\n    }\r\n    default: return state;\r\n  }\r\n}","import { createBrowserHistory } from 'history';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;","import order from '../features/order';\r\nimport restaurants from './restaurants';\r\nimport products from './products';\r\nimport reviews from '../features/reviews';\r\nimport users from '../features/users';\r\nimport currentRestaurant from '../features/currentRestaurant';\r\n\r\nimport { connectRouter } from 'connected-react-router'\r\nimport history from '../../history';\r\n\r\nexport default {\r\n  router: connectRouter(history),\r\n  order: order,\r\n  restaurants: restaurants,\r\n  currentRestaurant: currentRestaurant,\r\n  products: products,\r\n  reviews: reviews,\r\n  users: users\r\n};","import { v4 as uuid } from 'uuid';\r\n\r\nexport default (store) => (next) => (action) => {\r\n  if (!action.meta?.generateId) return next(action);\r\n\r\n  const { meta, ...props } = action;\r\n\r\n  const ids = meta.generateId.reduce((acc, value) => {\r\n    return {\r\n      ...acc,\r\n      [value]: uuid()\r\n    }\r\n  }, {});\r\n\r\n  next({\r\n    ...props,\r\n    meta: {\r\n      ...ids\r\n    }\r\n  })\r\n}","import { ERROR, LOADED, LOADING } from \"../constants/constants\";\r\n\r\nexport default store => next => async action => {\r\n  //! Проверяем, содержит ли action нужный нам флаг\r\n  if (!action.callApi) return next(action);\r\n\r\n  const { callApi, type } = action;\r\n\r\n  next({ ...action, type: type + LOADING })\r\n\r\n  try {\r\n    const data = await callApi();\r\n    next({ ...action, data, type: type + LOADED })\r\n  } catch (error) {\r\n    next({ ...action, type: type + ERROR, error })\r\n  }\r\n}","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\r\nimport reducer from './reducer';\r\nimport uuid from './middleware/uuid';\r\nimport api from './middleware/api';\r\nimport { routerMiddleware } from 'connected-react-router'\r\nimport history from '../history';\r\n\r\nexport default configureStore({\r\n  reducer,\r\n  middleware: (getDefaultMiddleware) => (\r\n    getDefaultMiddleware(\r\n      {\r\n        serializableCheck:\r\n          { ignoredActionPaths: ['callApi'] }\r\n      }).concat([routerMiddleware(history), api, uuid])\r\n  )\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport './index.css';\r\nimport App from './components/app';\r\nimport store from './redux/store';\r\nimport MoneyProvider from './context/money-context';\r\nimport history from './history';\r\nimport { ConnectedRouter } from 'connected-react-router'\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ConnectedRouter history={history}>\r\n      <MoneyProvider>\r\n        <App restaurants />\r\n      </MoneyProvider>\r\n    </ConnectedRouter>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}